apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: sourcegraph-private-registry-overlay
resources:
  - ../../base/monitoring
  - ../../base/sourcegraph
########################## HOW TO USE ########################################
# Replace the DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY variable with your registry
#
# Example: 
# - name: index.docker.io/sourcegraph/blobstore
#   newName: my.private.registry.docker.io/sourcegraph/blobstore
#
# You can also update the tag using the "newTag" field
################################################################################
images:
  # MAIN STACKS
  - name: index.docker.io/sourcegraph/blobstore
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/blobstore
    # newTag: new.private.tag
  - name: index.docker.io/sourcegraph/alpine-3.14
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/alpine-3.14
  - name: index.docker.io/sourcegraph/codeinsights-db
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/codeinsights-db
  - name: index.docker.io/sourcegraph/codeintel-db
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/codeintel-db
  - name: index.docker.io/sourcegraph/frontend
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/frontend
  - name: index.docker.io/sourcegraph/github-proxy
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/github-proxy
  - name: index.docker.io/sourcegraph/gitserver
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/gitserver
  - name: index.docker.io/sourcegraph/indexed-searcher
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/indexed-searcher
  - name: index.docker.io/sourcegraph/migrator
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/migrator
  - name: index.docker.io/sourcegraph/opentelemetry-collector
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/opentelemetry-collector
  - name: index.docker.io/sourcegraph/postgres-12-alpine
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/postgres-12-alpine
  - name: index.docker.io/sourcegraph/postgres_exporter
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/postgres_exporter
  - name: index.docker.io/sourcegraph/precise-code-intel-worker
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/precise-code-intel-worker
  - name: index.docker.io/sourcegraph/redis-cache
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/redis-cache
  - name: index.docker.io/sourcegraph/redis-store
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/redis-store
  - name: index.docker.io/sourcegraph/redis_exporter
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/redis_exporter
  - name: index.docker.io/sourcegraph/repo-updater
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/repo-updater
  - name: index.docker.io/sourcegraph/search-indexer
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/search-indexer
  - name: index.docker.io/sourcegraph/searcher
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/searcher
  - name: index.docker.io/sourcegraph/symbols
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/symbols
  - name: index.docker.io/sourcegraph/syntax-highlighter
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/syntax-highlighter
  - name: index.docker.io/sourcegraph/worker
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/worker
  # MONITORING STACKS
  - name: index.docker.io/sourcegraph/cadvisor
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/cadvisor
  - name: index.docker.io/sourcegraph/grafana
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/grafana
  - name: index.docker.io/sourcegraph/prometheus
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/prometheus
  - name: index.docker.io/sourcegraph/node-exporter
    newName: ${DEPLOY_SOURCEGRAPH_PRIVATE_REGISTRY}/sourcegraph/prometheus