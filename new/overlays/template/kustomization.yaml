apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- ../../base/sourcegraph
# [DO NOT REMOVE] Add replica count to frontend as env vars
# to allows intercommunication between services
replacements:
- path: config/sourcegraph-kustomize.yaml
configMapGenerator:
# [DO NOT REMOVE] Merge the values in the env/frontend.env file 
# to the env vars list in sourcegraph-frontend
- name: sourcegraph-frontend-env
  behavior: merge
  env: env/frontend.env
# [DO NOT REMOVE] Update resources with custom env vars values
# based on values defined in the config/overlay.config
- name: sourcegraph-kustomize-env
  behavior: merge
  env: config/overlay.config
##########################################################
# DO NOT MAKE ANY CHANGES ABOVE THIS LINE 
##########################################################
# This update namespace for all resources
# Add "components/namespace" to your components to create namespace
namespace: default
components:
# [RBACs required] deploy Sourcegraph monitoring stacks
- ../../components/monitoring
