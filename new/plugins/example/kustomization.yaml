apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- ../../base/sourcegraph
- ../../base/monitoring/cadvisor
# Handle updating endpoints configs for frontend
replacements:
- path: util/endpoints-update.yaml
generators:
- endpoint-generator.yaml
configMapGenerator:
# Handle updating env vars for frontend
# DO NOT REMOVE
- name: sourcegraph-frontend-env
  behavior: merge
  env: env/frontend.env
# Handle updating configs using env vars for kustomize
# DO NOT REMOVE
- name: sourcegraph-kustomize-env
  behavior: merge
  env: config/overlay.config
##########################################################
# DO NOT MAKE ANY CHANGES ABOVE THIS LINE 
##########################################################
# This update namespace for all resources
# Add "components/namespace" to your components to create namespace
namespace: default
components:
# [RBACs required] deploy Sourcegraph monitoring stacks
# - ../../components/monitoring
- ../../components/enable/service-discovery
- ../../components/hostname