apiVersion: apps/v1
kind: Deployment
metadata:
  name: searcher
spec:
  template:
    spec:
      initContainers:
        - name: transfer-cache
          image: us-central1-docker.pkg.dev/sourcegraph-ci/rfc795-public/alpine-3.14:5.3.666@sha256:0de2a485bf3be6b5a92bea8f46a134196ed22aea6e906525f9f8f63d0616db7d
          command: ["sh", "-c", "if [[ \"$(stat -c '%u' /mnt/cache)\" -ne 100 ]]; then chown -R 100:101 /mnt/cache; fi"]
          volumeMounts:
            - mountPath: /mnt/cache
              name: cache-ssd
          securityContext:
            runAsUser: 0
